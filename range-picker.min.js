"use strict";angular.module("rgkevin.datetimeRangePicker",["vr.directives.slider"]).filter("rgTime",[function(){return function(input,type){var hours=parseInt(input/60,10),minutes=parseInt(input-60*hours)||"00",meridian=type?":00":hours>=12&&24!==hours?" pm":" am";return(!type&&hours>12?24===hours?"00":(10>hours-12?"0":"")+(hours-12):(10>hours?"0":"")+hours)+":"+minutes+meridian}}]).directive("rgRangePicker",["$compile",function($compile){return{restrict:"A",scope:{data:"=rgRangePicker",labels:"="},template:function(element,attrs){var defaultsAttrs={data:{date:{from:new Date,to:new Date},time:{from:0,to:1440}}};for(var xx in defaultsAttrs)void 0===attrs[xx]&&(attrs[xx]=defaultsAttrs[xx]);return'<div class="rg-range-picker"><div class="rg-range-picker-box well"><div class="rg-range-picker-calendars"><div class="rg-range-picker-calendar-box"><h5 class="rg-range-picker-calendar-label" ng-bind-template="{{labels.date.from}}"></h5><datepicker ng-model="data.date.from" max-date="data.date.to" show-weeks="false" class="clean-calendar"></datepicker></div><div class="rg-range-picker-calendar-box right"><h5 class="rg-range-picker-calendar-label" ng-bind-template="{{labels.date.to}}"></h5><datepicker ng-model="data.date.to" min-date="data.date.from" show-weeks="false" class="clean-calendar"></datepicker></div></div><div class="rg-range-picker-slider" id="rgRangePickerSliderContainer"><div class="rg-range-picker-slider-labels"><div class="row"><div class="rg-range-picker-divider xs-hidden"><span class="label">to</span></div><div class="col-xs-6 text-center"><span class="label label-range-picker">{{data.time.from | rgTime:data.time.hours24}}</span></div><div class="col-xs-6 text-center"><span class="label label-range-picker">{{data.time.to | rgTime:data.time.hours24}}</span></div></div></div></div></div></div>'},link:function(scope,element,attrs){function renderSlider(){sliderAlreadyRender||(sliderContainer.append(slider),$compile(slider)(scope),sliderAlreadyRender=!0)}var sliderMinWidth=615,sliderContainer=angular.element("#rgRangePickerSliderContainer",element[0]),slider=angular.element('<div slider class="clean-slider" ng-model="data.time.from" ng-model-range="data.time.to" floor="{{data.time.dFrom}}" ceiling="{{data.time.dTo}}" buffer="{{data.time.minRange || 1}}" step="{{data.time.step || 1}}" step-width="{{data.time.step || 1}}" precision="0" stretch="3"></div>'),sliderAlreadyRender=!1,defaultLabels={date:{from:"Start date",to:"End date"}},timeDefaults={from:480,to:1020,dFrom:0,dTo:1440,step:15,minRange:15,hours24:!0};scope.labels=angular.extend(defaultLabels,scope.labels),scope.data.time=angular.extend(timeDefaults,scope.data.time),attrs.collapse?scope.$watch(function(){return element[0].className},function(){element.hasClass("in")&&renderSlider()}):renderSlider(),console.log("width",element.width()),element.width()<=sliderMinWidth&&angular.element(".rg-range-picker",element[0]).addClass("rg-range-picker-responsive")},controller:function(){}}}]);